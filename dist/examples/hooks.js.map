{"version":3,"file":"hooks.js","names":["useEffect","useRef","post","StrictDict","useKeyedState","stateKeys","importedClicked","fileInputChanged","loaded","numEvents","formUrl","useExampleComponentData","importClicked","setImportClicked","fileChanged","setFileChanged","setLoaded","setNumEvents","fileInputRef","num","handleImportedComponentClicked","current","click","val","handleFileInputChanged","file","files","clearInput","value","formData","FormData","append","then","formAction"],"sources":["../../src/examples/hooks.js"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nimport { useEffect, useRef } from 'react';\nimport { post } from 'axios';\n\nimport { StrictDict, useKeyedState } from 'utils';\n\nexport const stateKeys = StrictDict({\n  importedClicked: 'importedClicked',\n  fileInputChanged: 'fileInputChanged',\n  loaded: 'loaded',\n  numEvents: 'numEvents',\n});\n\nexport const formUrl = 'localhost:18000/form-url';\n\nexport const useExampleComponentData = () => {\n  const [importClicked, setImportClicked] = useKeyedState(stateKeys.importedClicked, 0);\n  const [fileChanged, setFileChanged] = useKeyedState(stateKeys.fileInputChanged, null);\n  const [, setLoaded] = useKeyedState(stateKeys.loaded, false);\n  const [, setNumEvents] = useKeyedState(stateKeys.numEvents, 0);\n  const fileInputRef = useRef();\n\n  useEffect(() => {\n    setLoaded(true);\n  }, [setLoaded]);\n\n  useEffect(() => {\n    setNumEvents(num => num + 1);\n  }, [setNumEvents, importClicked, fileChanged]);\n\n  const handleImportedComponentClicked = () => {\n    fileInputRef.current?.click();\n    setImportClicked(val => val + 1);\n  };\n  const handleFileInputChanged = (file) => {\n    if (fileInputRef.current?.files[0]) {\n      const clearInput = () => { fileInputRef.current.value = null; };\n      const formData = new FormData();\n      formData.append('csv', fileInputRef.current.files[0]);\n      post(formUrl, formData).then(clearInput);\n    }\n    setFileChanged(file);\n  };\n\n  return {\n    fileInputRef,\n    formAction: formUrl,\n    handleImportedComponentClicked,\n    handleFileInputChanged,\n  };\n};\n\nexport default useExampleComponentData;\n"],"mappings":"AAAA;AACA,SAASA,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzC,SAASC,IAAI,QAAQ,OAAO;AAE5B,SAASC,UAAU,EAAEC,aAAa,QAAQ,OAAO;AAEjD,OAAO,MAAMC,SAAS,GAAGF,UAAU,CAAC;EAClCG,eAAe,EAAE,iBAAiB;EAClCC,gBAAgB,EAAE,kBAAkB;EACpCC,MAAM,EAAE,QAAQ;EAChBC,SAAS,EAAE;AACb,CAAC,CAAC;AAEF,OAAO,MAAMC,OAAO,GAAG,0BAA0B;AAEjD,OAAO,MAAMC,uBAAuB,GAAGA,CAAA,KAAM;EAC3C,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGT,aAAa,CAACC,SAAS,CAACC,eAAe,EAAE,CAAC,CAAC;EACrF,MAAM,CAACQ,WAAW,EAAEC,cAAc,CAAC,GAAGX,aAAa,CAACC,SAAS,CAACE,gBAAgB,EAAE,IAAI,CAAC;EACrF,MAAM,GAAGS,SAAS,CAAC,GAAGZ,aAAa,CAACC,SAAS,CAACG,MAAM,EAAE,KAAK,CAAC;EAC5D,MAAM,GAAGS,YAAY,CAAC,GAAGb,aAAa,CAACC,SAAS,CAACI,SAAS,EAAE,CAAC,CAAC;EAC9D,MAAMS,YAAY,GAAGjB,MAAM,CAAC,CAAC;EAE7BD,SAAS,CAAC,MAAM;IACdgB,SAAS,CAAC,IAAI,CAAC;EACjB,CAAC,EAAE,CAACA,SAAS,CAAC,CAAC;EAEfhB,SAAS,CAAC,MAAM;IACdiB,YAAY,CAACE,GAAG,IAAIA,GAAG,GAAG,CAAC,CAAC;EAC9B,CAAC,EAAE,CAACF,YAAY,EAAEL,aAAa,EAAEE,WAAW,CAAC,CAAC;EAE9C,MAAMM,8BAA8B,GAAGA,CAAA,KAAM;IAC3CF,YAAY,CAACG,OAAO,EAAEC,KAAK,CAAC,CAAC;IAC7BT,gBAAgB,CAACU,GAAG,IAAIA,GAAG,GAAG,CAAC,CAAC;EAClC,CAAC;EACD,MAAMC,sBAAsB,GAAIC,IAAI,IAAK;IACvC,IAAIP,YAAY,CAACG,OAAO,EAAEK,KAAK,CAAC,CAAC,CAAC,EAAE;MAClC,MAAMC,UAAU,GAAGA,CAAA,KAAM;QAAET,YAAY,CAACG,OAAO,CAACO,KAAK,GAAG,IAAI;MAAE,CAAC;MAC/D,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,KAAK,EAAEb,YAAY,CAACG,OAAO,CAACK,KAAK,CAAC,CAAC,CAAC,CAAC;MACrDxB,IAAI,CAACQ,OAAO,EAAEmB,QAAQ,CAAC,CAACG,IAAI,CAACL,UAAU,CAAC;IAC1C;IACAZ,cAAc,CAACU,IAAI,CAAC;EACtB,CAAC;EAED,OAAO;IACLP,YAAY;IACZe,UAAU,EAAEvB,OAAO;IACnBU,8BAA8B;IAC9BI;EACF,CAAC;AACH,CAAC;AAED,eAAeb,uBAAuB","ignoreList":[]}